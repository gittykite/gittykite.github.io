# ADsP :: 과목4. 데이터 분석

# 1. R 기초와 데이터 마트
* 분석 환경 이해
* R과 R 스튜디오 설치방법 숙지
* R 기본 사용법 숙지
* 데이터 마트 정의 이해
* reshape 패키지 이용한 데이터마트 생성법 이해
* plyr 패키지 이해
* 결측값 처리방법 이해
* 이상값 처리방법 이해

## 1.1 R 기초
: 오랜 역사의 오픈소스 통계분석 도구. 강력한 시각화와 다양한 패키지로 인기 증가 

|R|SAS/SPSS|
|---|---|
| 오픈소스 (무료)| 유료 & 고가|
| 작은 용량| 대용량 |
| 다양한 모듈/패키지 지원| 별도 구매|
| 최근 기술/알고리즘 반영 빠름| 느림/다소 느림|
| 공개 논문/자료 많음| 유료 도서 위주|
| 활발한 공개 커뮤니티| NA (답변X)|

### R의 역사
+ 1976년 벨 연구소에서 통게 프로그래밍 언어 S 자체 개발
+ 1988년 S의 문법 구조/언어에 많은 변화
+ 1933년 뉴질랜드 어크랜드 대학에서 R 개발 (Ross Inaka, Robert Gentleman)
+ 1955년 GPL(GNU Public General License)로 무료 공개

### R의 특징
+ 그래픽 처리  
    - 그래픽 옵션 충실 (쉽고 섬세한 작업 가능)
    - 그래픽 처리 빠름
+ 데이터처리 & 계산 능력  
    - 벡터/행렬 등 다양한 데이터 구조 지원
    - 간단한 개별 데이터 접근 절차 (큰 데이터 핸들링 용이)
+ 패키지  
    - 특정 분석기법에 필요한 함수들
    - 쉽게 추가 가능 (높은 확장성)
    - 최신 이론/기법 공유 용이

### R 개발환경
+ R 코어 https://www.r-project.org/ 

    |화면|기능|
    |---|---|
    |메뉴바|기본 기능|
    |아이콘바|자주 사용하는 기능|
    |R콘솔|명령어 입력(한 줄), 결과 출력|
    |스크립트창|여러 줄 코드 작성 & 실행 (한 줄씩)|

+ R 스튜디오 https://www.rstudio.com/
    - R 사용하는 무료 통합개발환경 (IDE: Integrated Dev Env)
    - 메모리에 저장된 변수 정보 바로 접근 가능 (조회/수정 가능)
    - 스크립트 관리/문서화 용이

        |화면|기능|
        |---|---|
        |스크립트창|여러 줄 코드 작성 & 실행 (한 줄씩)|
        |R콘솔|명령어 입력(한 줄), 결과 출력|
        |환경/히스토리|실행 중인 프로젝트 변수/데이터셋 등, 명령어 실행이력|
        |기타|파일, 플롯, 패키지, 도움말 등|

### R 패키지 이용
+ R 코어 패키지 설치  
     : [패키지툴] 메뉴 -[패키지(를)설치하기]-[CRAN mirror]설정 - [Packages]선택
+ R 스튜디오 패키지 설치  
    - 탭 메뉴 설치  
     : [Packages] 탭 - [Install] - 패키지명 입력 후 [Install]
    - 명령어 설치  
        ```
        install.packages("_패키지명_")
        libarary(_패키지명_)  
        ```
### R 도움말 이용
: 도움말 명령어로 거의 모든 함수에 대한 상세한 설명(인자/옵션/예제 등) 확인 가능

|명령어|예시|
|---|---|
|?|?par|
|help|help( par )|

### R의 데이터 구조
|데이터구조|구성|원소 타입|함수|
|---|---|---|---|
|벡터| 하나 이상의 스칼라값| 동일 타입|c|
|행렬| 행/열로 구성된 2차원 데이터구조|동일 타입|matrix, rbind, cbind|
|데이터프레임|행/열로 구성된 2차원 데이터구조|여러 타입<br>(열은 동일타입으로 구성)|data.frame|

+ 벡터  

    ```
    vector1 <- c(1, 3, 5)
    vector2 <- c("사과", "바나나")
    vector3 <- c(vector1, vector2)

    # vector3 출력결과 
    #
    # [1] "1" "3" "5" "사과" "바나나" 
    # => 문자형 벡터와 합쳐질 경우 문자형으로 타입변경됨
    ```
+ 행렬  

    ```
    matrix1 <- matrix(1:6, nrow=2, byrow=T)
    matrix2 <- matrix(c(1,2,3,4,5,6), ncol=3, byrow=T)
    ```

    > nrow: 행 개수  
    > ncol: 열 개수  
    > byrow: 값이 행부터 채워지도록 하는 옵션  

    ```
    # matrix1 & matrix2 출력결과 (동일)
    #
    #      [,1] [,2] [,3]
    # [1,]   1    2    3   
    # [2,]   4    5    6
    ```

    ```
    row1 <- c(7, 8, 9)
    rbind(matrix1, row1)

    # rbind 출력결과
    #      [,1] [,2] [,3]
    # [1,]   1    2    3   
    # [2,]   4    5    6
    # [3,]   7    8    9
    ```

    ```
    col1 <- c(30, 60)
    cbind(matrix1, col1)

    # cbind 출력결과
    #      [,1] [,2] [,3] [,4]
    # [1,]   1    2    3   30
    # [2,]   4    5    6   60
    ```

+ 데이터프레임

    ```
    x1 <- c(100, 80, 60, 40, 30)
    x2 <- c("A", "B", "C", "A", "B")
    dataframe1 <- data.frame(x1, x2)
    ```


### R 외부 데이터 불러오기
|파일종류|함수|데이터타입|
|---|---|---|
|CSV| read.table<br>read.csv (구분자 설정 생략가능)| 데이터프레임|
|TXT| read.table (구분자/형식 정확해야)| 데이터프레임|
|엑셀(XLS/XSLX)| read.csv (CSV로 변환후) <br><br> RODBC::odbcConnectExcel<br>RODBC::sqlFetch| 데이터프레임|  

+ CSV

    ```
    read.table("C:\\data\\test.csv", header = T, sep = ",")
    read.csv("C:\\data\\test.csv", header = T)
    ```
    > sep: 구분자 설정 옵션   

+ TXT

    ```
    read.table("C:\\\data\\\test.txt") 
    ```
+ Excel

    ```
    library(RODBC)
    conn1 <- odbcConnectExcel("C:\\\data\\\확장자_없는_파일명")
    data1 <- sqlFetch(conn1, "워크시트명")
    close(conn1)
    ```

### R 기초함수
+ 수열생성

    |함수|내용|
    |---|---|
    | rep | 반복|
    | seq | 순열|

```
```

```
```

+ 수치계산

    |연산자|내용|
    |---|---|
    | + | 더하기 |
    | - | 빼기  |
    | * | 곱하기 |
    | / | 나누기 |
    
+ 행렬계산

    |함수/연산자|내용|
    |---|---|
    |t | 전치행렬 (transpose matrix)|
    |solve|역행렬 (inverse matrix)|
    |%*% |행렬곱|    

```
```

```
```

```
```

+ 통계연산

    |함수|내용|
    |---|---|
    | mean |평균 | 
    | var |분산 | 
    | sd |표준편차| 
    | sum |합 | 
    | median |중앙값 | 
    | log |자연로그 | 
    | cov |공분산 | 
    | cor |상관계수 | 
    | summary |요약(사분위수/최대/최소/중앙/평균) | 

+ 데이터 핸들링

    ```
    mat3 <- matrix(1:12, nrow=3, ncol=4, byrow=T)
    rownames(mat3) <- c("row1", "row2", "row3")
    colnames(mat3) <-c ("col1", "col1", "col1", "col1")

    mat3[2, 3]
    mat3[, 3]     # all, col3
    mat3[,-2]     # except a col
    mat3["row1", ]  # row by name
    mat3[, 2:3]     # range
    mat3[c(1,2), ]  # rows by index
    ```

+ 반복/조건문
    - for

    ```
    ```

    - while

    ```
    ```

    - if~ else

    ```
    ```

+ 문자열

    ```
    ```


+ 데이터구조 변환

    ```
    ```

### 사용자 정의 함수

```
```

### R 그래픽 기능
+ 산점도 그래프

    ```
    ```

+ 산점도 행렬

    ```
    ```

+ 히스토그램

    ```
    ```

+ 상자그림

    ```
    ```

## 1.2 데이터 마트
: 데이터의 일부분으로 특정 사용자가 관심 갖는 데이터들을 담은 상대적으로 작은 규모의 데이터 웨어하우스

### reshape
- 데이터 탐색 용이하게 하는 데이터 재정렬 기법
- 밀집화와 다르게 데이터가 가진 정보 유지
- melt 단계
- cast 단계

```
```

### sqldf
- 표준 SQL 문장 사용 가능 
- 싱글쿼트 이용해 특수문자 입력 가능
- Mac 버전에서는 에러 발생할 수도

```
sqldf("select * from iris where Species like 'se%' limit 10")
```

### plyr
- 데이터 분리/처리/결합 패키지
- apply 함수 기반 
- 데이터/출력변수를 동시에 배열로 치환해 처리
- 입력/출력 데이터 형태에 따라 접두사 결정

    |입력데이터|출력데이터|함수|
    |---|---|---|
    |데이터프레임|데이터프레임|ddply|
    |데이터프레임|리스트|  dlply|
    |데이터프레임|배열|  daply|
    |리스트  |데이터프레임|  ldply|
    |리스트  |리스트|  llply|
    |리스트  |배열|  laply|
    |배열   |데이터프레임|  adply|
    |배열   |리스트|  alply|
    |배열   |배열|  aaply|

```
```

### 데이터 테이블
- 데이터프레임과 유사
- 빠른 그룹화 / 순서화 / 짧은 문장 지원
- 64Bit 환경에서 RAM 충분할 때 효율적

```
```

## 1.3 결측값 & 이상값 처리

### 데이터 탐색
: 데이터 분석 전 다각도로 접근 => 대략의 데이터 특성 파악 & 통찰 
+ 범주형 변수
  - 각 범주 빈도수 출력해 데이터 분포 파악 
+ 연속형 변수
  - 기초 통계치 출력
  - 공분산/상관계수 행렬 출력해 변수 간 선형 상관관계 강도 확인

```
```

```
```

### 결측값 처리
- 가능하면 제외하는 것이 좋으나 의미 있는 경우도 있음
- 처리방법에 따라 전체 속도에 많은 영향
- 자동화 할 경우 업무 효율성 매우 향상
- 패키지: Amelia 2, Mice, mistools 등
- NA
- NaN
- 방식: 삭제 / 대표값으로 대체 / imputation

is.na
complete.cases

```
```

### 이상값 검색
원인
- 의도치 않게 잘못 입력한 경우
- 의도치 않게 입력했으나 분석목적에 부합 안 해서 제거 필요한 경우
- 의도지 않은 형상이지만 분석에 포함해야 하는 경우
- 의도된 이상값

식별방법  
- ESD 알고리즘 이용
- MADM 알고리즘 이용
- boxplot 이용
- outliers 패키지

```
```

# 2. 통계 분석
* 모집단 / 표본 / 표본추출 방법
* 척도의 종류
* 확률변수
* 가설검정 과정
* 상관/회귀/주성분 분석, 다차원 척도법
* 시계열 모형

## 2.1 통계학 개론
### 통계학
: 자료로부터 유용한 정보 이끌어내는 학문 = 자료의 수집 / 정리 / 해석

### 모집단
: 유용한 정보의 대상 = 우리가 알고자 하는 전체, 추출단위/원소로 구성

### 표본 (Sample)
: 표본조사의 대상, 모집단의 일부에서 추출한 일부  
=> 모집단 대표하는지 **모집단의 정의, 표본크기/추출방식, 조사기간/방법**  확인 필요

** **총조사 (Census)**: 모집단의 개체 모두를 조사하는 조사 => 비용/시간 소모 큼  
** **표본조사**: 모집단의 일부만 초사해 모집단에 대해 추론하는 조사  
** **모수 (parameter)**: 모집단에 대해 알고자 하는 값  
** **통계량 (static)**: 모수 추론 위해 구하는 표본의 값들  
** **유한/무한 모집단**: 개체수에 따라 나눈 모집단 (무한모집단은 보통 개념적 집단)  


### 표본추출 방법
+ 단순랜덤추출법 (Simple Random Sampling)
	- N개 모집단에 일련번호 부여 
	- n개 번호 임의 선택 (n <= N)  
+ 계통추출법 (Systematic Sampling)
    - N개 모집단에 일련번호 부여 
    - K개씩 구간 분리 
    - 첫 구간 시작점 임의 선택
    - K개씩 띄어 표본추출
+ 집락추출법 (Cluster Sampling)
	- 모집단이 몇 개 집락으로 구성 + 각 집락 원소에 일련번호 부여
	- 일부 집락을 랜덤 선택 
	- 선택된 집락에서 표본 임의 추출
+ 층화추출법 (Stratified Sampling)
	- 각 원소 이질적인 경우
	- 유사한 원소끼리 층(stratum)으로 구분 
	- 각 층에서 표본 랜덤 추출

### 실험
: 특정 목적 하에 대상에게 처리를 가한 후 그 결과를 관측해 자료수집
- 실험집단 + 비교집단 ???

### 자료의 종류
+ 질적자료
+ 양적자료

### 측정
+ 명목척도
+ 순서척도
+ 구간척도
+ 비율척도


## 2.2 기초 통계 분석

## 2.3 다변량 분석

## 2.4 시계열 예측

# 3. 정형 데이터  마이닝

## 3.1 데이터 마이닝 개요

## 3.2 분류 분석

## 3.3 군집 분석

## 3.4 연관 분석 
